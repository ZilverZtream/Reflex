const t=Symbol(),e=Symbol.for("rx.i"),r=Symbol.for("rx.s"),s=Symbol(),n={__proto__:null,true:1,false:1,null:1,undefined:1,NaN:1,Infinity:1,if:1,else:1,for:1,while:1,do:1,switch:1,case:1,break:1,continue:1,return:1,try:1,catch:1,finally:1,throw:1,new:1,delete:1,typeof:1,instanceof:1,in:1,of:1,void:1,await:1,async:1,yield:1,function:1,class:1,extends:1,super:1,this:1,var:1,let:1,const:1,Math:1,Date:1,console:1,window:1,document:1,Array:1,Object:1,Number:1,String:1,Boolean:1,JSON:1,Promise:1,Symbol:1,BigInt:1,Map:1,Set:1,RegExp:1,Error:1,parseInt:1,parseFloat:1,isNaN:1,isFinite:1,$event:1},i={__proto__:null,push:1,pop:1,shift:1,unshift:1,splice:1,sort:1,reverse:1,fill:1,copyWithin:1},o={__proto__:null,splice:1,sort:1,reverse:1,shift:1,unshift:1,fill:1,copyWithin:1},l={__proto__:null,get:1,has:1,forEach:1,keys:1,values:1,entries:1,set:1,add:1,delete:1,clear:1},c=/(?:^|[^.\w$])([a-zA-Z_$][\w$]*)/g,f=Object.assign(Object.create(null),{constructor:1,prototype:1,__defineGetter__:1,__defineSetter__:1,__lookupGetter__:1,__lookupSetter__:1});f.__proto__=1;const a=/^\s*(javascript|vbscript|data):/i,h=/\[(["'`])constructor\1\]|\[(["'`])__proto__\1\]|\.constructor\s*\(|Function\s*\(/i,_={get(e,s,n){const o=e[t];if(s===t)return o;if(s===r)return e[r];if("symbol"==typeof s)return Reflect.get(e,s,n);const l=o.engine;if(i[s])return o._am||(o._am=Object.create(null)),o._am[s]||(o._am[s]=l._am(e,s,o)),o._am[s];l._tk(o,s);const c=Reflect.get(e,s,n);return l._wrap(c)},set(r,s,n,i){const o=r[t],l=o.engine,c=l.toRaw(n),f=r[s];if(Object.is(f,c)&&"length"!==s)return!0;let a,h=!1,_=-1;"string"==typeof s&&(_=Number(s),h=_>=0&&Number.isInteger(_)&&String(_)===s),a="length"===s||(h?_<r.length:s in r);return!!Reflect.set(r,s,c,i)&&(l._tr(o,s),"length"===s?l._tr(o,e):h&&(l._tr(o,e),a||l._tr(o,"length")),!0)},deleteProperty(r,s){const n=r[t];if(!(s in r))return!0;const i=Reflect.deleteProperty(r,s);if(i){const t=n.engine;t._tr(n,s),t._tr(n,e),t._tr(n,"length")}return i}},u={get(e,s,n){const i=e[t];if(s===t)return i;if(s===r)return e[r];if("symbol"==typeof s)return Reflect.get(e,s,n);const o=i.engine;o._tk(i,s);const l=Reflect.get(e,s,n);return o._wrap(l)},set(r,s,n,i){const o=r[t],l=o.engine,c=l.toRaw(n),f=r[s];if(Object.is(f,c))return!0;const a=s in r;return!!Reflect.set(r,s,c,i)&&(l._tr(o,s),a||l._tr(o,e),!0)},deleteProperty(r,s){const n=r[t];if(!(s in r))return!0;const i=Reflect.deleteProperty(r,s);if(i){const t=n.engine;t._tr(n,s),t._tr(n,e)}return i}},p={get(s,n,i){const o=s[t];if(n===t)return o;if(n===r)return s[r];if("symbol"==typeof n&&n!==Symbol.iterator)return Reflect.get(s,n,i);const c=o.engine;return"size"===n?(c._tk(o,e),s.size):n!==Symbol.iterator&&!l[n]||"function"!=typeof s[n]?(c._tk(o,n),Reflect.get(s,n,i)):c._cm(s,n,o,!0)},set:(t,e,r,s)=>Reflect.set(t,e,r,s),deleteProperty:(t,e)=>Reflect.deleteProperty(t,e)},d={get(s,n,i){const o=s[t];if(n===t)return o;if(n===r)return s[r];if("symbol"==typeof n&&n!==Symbol.iterator)return Reflect.get(s,n,i);const c=o.engine;return"size"===n?(c._tk(o,e),s.size):n!==Symbol.iterator&&!l[n]||"function"!=typeof s[n]?(c._tk(o,n),Reflect.get(s,n,i)):c._cm(s,n,o,!1)},set:(t,e,r,s)=>Reflect.set(t,e,r,s),deleteProperty:(t,e)=>Reflect.deleteProperty(t,e)};class g{constructor(t=1e3){this.max=t,this.cache=new Map}get(t){return this.cache.get(t)}set(t,e){return this.cache.size>=this.max&&this.cache.clear(),this.cache.set(t,e),e}has(t){return this.cache.has(t)}clear(){this.cache.clear()}}class y{constructor(t={}){this.s=null,this._e=null,this._es=[],this._q=[],this._p=!1,this._b=0,this._pt=new Map,this._ec=new g(1e3),this._mf=new WeakMap,this._dh=new Map,this._dr=null,this._cp=new Map,this._parser=null,this.cfg={sanitize:!0,cspSafe:!1,cacheSize:1e3},this.s=this._r(t);"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.mount(),{once:!0}):queueMicrotask(()=>this.mount())}configure(t){return void 0!==t.sanitize&&(this.cfg.sanitize=t.sanitize),void 0!==t.cspSafe&&(this.cfg.cspSafe=t.cspSafe),void 0!==t.cacheSize&&(this.cfg.cacheSize=t.cacheSize,this._ec=new g(t.cacheSize)),void 0!==t.parser&&(this._parser=t.parser),this}_getParser(){if(!this._parser)throw new Error("Reflex: CSP mode requires a parser. Use configure({ parser: new SafeExprParser() }). Import SafeExprParser from 'reflex/csp' or provide a custom parser with compile(exp, reflex) method.");return this._parser}mount(t=document.body){return this._dr=t,this._bnd(t,null),this._w(t,null),this}component(t,e){const r=document.createElement("template");let s=e.template;return this.cfg.sanitize&&("undefined"!=typeof DOMPurify?s=DOMPurify.sanitize(s,{RETURN_DOM_FRAGMENT:!1,WHOLE_DOCUMENT:!1}):console.warn("Reflex: DOMPurify not loaded. Component templates should be trusted or load DOMPurify for sanitization.")),r.innerHTML=s,this._cp.set(t.toLowerCase(),{_t:r.content.firstElementChild,p:e.props||[],s:e.setup}),this}computed(t){const e=this;let r,s=!0;const n=new Set,i=this._ef(()=>(r=t(e.s),s=!1,r),{lazy:!0,sched:()=>{if(!s){if(s=!0,!n.size)return void e._qj(i);for(const t of n)1&t.f&&!(2&t.f)&&(t.s?t.s(t):e._qj(t))}}});return i(),{get value(){return e._e&&!n.has(e._e)&&(n.add(e._e),e._e.d.push(n)),s&&i(),r}}}watch(t,e,r={}){const s=this,n="function"==typeof t?t:()=>t.value;let i,o;const l=()=>{const t=c();!r.deep&&Object.is(t,i)||(o&&o(),e(t,i,t=>{o=t}),i=r.deep?s._clone(t):t)},c=this._ef(()=>{const t=n();return r.deep&&s._trv(t),t},{lazy:!0,sched:()=>s._qj(l)});return r.immediate?l():(i=c(),r.deep&&(i=this._clone(i))),()=>c.kill()}batch(t){this._b++;try{t()}finally{if(0===--this._b)try{this._fpt()}catch(t){console.error("Reflex: Error during batch flush:",t)}}}nextTick(t){return new Promise(e=>queueMicrotask(()=>{this._fl(),t?.(),e()}))}toRaw(e){if(null===e||"object"!=typeof e)return e;const r=e[t]||this._mf.get(e);return r?r.r:e}clearCache(){return this._ec.clear(),this}_r(e){if(null===e||"object"!=typeof e)return e;if(e[r])return e;if(e instanceof Node)return e;const s=e[t]||this._mf.get(e);if(s)return s.p;const n={p:null,r:e,d:new Map,ai:!1,_am:null,engine:this},i=Array.isArray(e),o=e instanceof Map,l=e instanceof Set;let c;return c=i?_:o?p:l?d:u,n.p=new Proxy(e,c),Object.isExtensible(e)?Object.defineProperty(e,t,{value:n,configurable:!0}):this._mf.set(e,n),n.p}_wrap(t){return null===t||"object"!=typeof t||t[r]||t instanceof Node?t:this._r(t)}_tk(t,e){if(!this._e)return;if(Array.isArray(t.r)&&"string"==typeof e){const r=Number(e);r>=0&&Number.isInteger(r)&&String(r)===e&&(t.ai=!0)}let r=t.d.get(e);r||t.d.set(e,r=new Set),r.has(this._e)||(r.add(this._e),this._e.d.push(r))}_tr(t,e){if(this._b>0){let r=this._pt.get(t);return r||this._pt.set(t,r=new Set),void r.add(e)}const r=t.d.get(e);if(r)for(const t of r)1&t.f&&!(2&t.f)&&(t.s?t.s(t):this._qj(t))}_fpt(){if(!this._pt.size)return;const t=this._pt;this._pt=new Map;for(const[e,r]of t)for(const t of r)try{this._tr(e,t)}catch(e){console.error("Reflex: Error triggering update for key:",t,e)}}_am(t,r,s){const n=this;return function(...i){let l;n._b++;try{l=Array.prototype[r].apply(t,i);let c=n._pt.get(s);if(c||n._pt.set(s,c=new Set),c.add(e),c.add("length"),s.ai&&o[r])for(const[t,e]of s.d)if(e.size){if("string"==typeof t){const e=Number(t);e>=0&&Number.isInteger(e)&&String(e)===t&&c.add(t)}}else s.d.delete(t)}finally{if(0===--n._b)try{n._fpt()}catch(t){console.error("Reflex: Error flushing pending triggers:",t)}}return l}}_cm(t,r,s,n){if(s[r])return s[r];const i=this,o=(n?Map.prototype:Set.prototype)[r];return r===Symbol.iterator||"entries"===r||"values"===r||"keys"===r?s[r]=function(){i._tk(s,e);const l=o.call(t);return{[Symbol.iterator](){return this},next(){const t=l.next();if(t.done)return t;if(n){if("keys"===r||"values"===r)return{done:!1,value:i._wrap(t.value)};const[e,s]=t.value;return{done:!1,value:[i._wrap(e),i._wrap(s)]}}return{done:!1,value:i._wrap(t.value)}},return:t=>l.return?l.return(t):{done:!0,value:t}}}:s[r]="get"===r?e=>{const r=i.toRaw(e);return i._tk(s,r),i._wrap(o.call(t,r))}:"has"===r?e=>{const r=i.toRaw(e);return i._tk(s,r),o.call(t,r)}:"forEach"===r?function(r,n){i._tk(s,e),o.call(t,(t,e)=>r.call(n,i._wrap(t),i._wrap(e),s.p))}:"set"===r?function(r,n){const l=i.toRaw(r),c=i.toRaw(n),f=t.has(l),a=f?t.get(l):void 0;if(o.call(t,l,c),!f||!Object.is(a,c)){i._b++;try{let t=i._pt.get(s);t||i._pt.set(s,t=new Set),t.add(l),t.add(e)}finally{if(0===--i._b)try{i._fpt()}catch(t){console.error("Reflex: Error flushing pending triggers:",t)}}}return s.p}:"add"===r?function(r){const n=i.toRaw(r);if(!t.has(n)){o.call(t,n),i._b++;try{let t=i._pt.get(s);t||i._pt.set(s,t=new Set),t.add(n),t.add(e)}finally{if(0===--i._b)try{i._fpt()}catch(t){console.error("Reflex: Error flushing pending triggers:",t)}}}return s.p}:"delete"===r?r=>{const n=i.toRaw(r),l=t.has(n),c=o.call(t,n);if(l){i._b++;try{let t=i._pt.get(s);t||i._pt.set(s,t=new Set),t.add(n),t.add(e)}finally{if(0===--i._b)try{i._fpt()}catch(t){console.error("Reflex: Error flushing pending triggers:",t)}}}return c}:"clear"===r?()=>{if(t.size){i._b++;try{let r=i._pt.get(s);r||i._pt.set(s,r=new Set),t.forEach((t,e)=>r.add(e)),r.add(e),o.call(t)}finally{if(0===--i._b)try{i._fpt()}catch(t){console.error("Reflex: Error flushing pending triggers:",t)}}}}:function(){return i._tk(s,e),o.call(t)}}_ef(t,e={}){const r=this,s=()=>{if(1&s.f){r._cln_eff(s),r._es.push(r._e),r._e=s,s.f|=2;try{return t()}finally{s.f&=-3,r._e=r._es.pop()}}};return s.f=1,s.d=[],s.s=e.sched||null,s.kill=()=>{r._cln_eff(s),s.f=0},e.lazy||s(),s}_cln_eff(t){for(let e=0;e<t.d.length;e++)t.d[e].delete(t);t.d.length=0}_qj(t){4&t.f||(t.f|=4,this._q.push(t),this._p||(this._p=!0,queueMicrotask(()=>this._fl())))}_fl(){this._p=!1;const t=this._q;this._q=[];for(let e=0;e<t.length;e++){const r=t[e];r.f&=-5;try{r()}catch(t){console.error("Reflex: Error during flush:",t)}}}_reg(t,e){(t[s]||(t[s]=[])).push(e)}_kill(t){const e=t[s];if(e){for(let t=0;t<e.length;t++)try{e[t]()}catch{}t[s]=null}for(let e=t.firstChild;e;e=e.nextSibling)this._kill(e)}_w(t,e){let r=t.firstChild;for(;r;){const t=r.nextSibling,s=r.nodeType;if(1===s){if(null===r.getAttribute("m-ignore")){const t=r.tagName;if("TEMPLATE"===t);else{if(null!==r.getAttribute("m-if"))this._dir_if(r,e);else{if(null!==r.getAttribute("m-for"))this._dir_for(r,e);else{const s=t.toLowerCase();this._cp.has(s)?this._comp(r,s,e):(this._bnd(r,e),this._w(r,e))}}}}}else if(3===s){const t=r.nodeValue;t&&-1!==t.indexOf("{{")&&this._txt(r,e)}r=t}}_bnd(t,e){const r=t.attributes;if(r)for(let s=r.length-1;s>=0;s--){const n=r[s],i=n.name,o=n.value;i.startsWith(":")?this._at(t,i.slice(1),o,e):i.startsWith("@")?this._ev(t,i.slice(1),o,e):i.startsWith("m-")&&("m-model"===i?this._mod(t,o,e):"m-text"===i?this._at(t,"textContent",o,e):"m-html"===i?this._html(t,o,e):"m-show"===i&&this._show(t,o,e))}}_dir_if(t,e){const r=this._fn(t.getAttribute("m-if")),s=document.createComment("if");let n;t.replaceWith(s);const i=this._ef(()=>{const i=!!r(this.s,e);i&&!n?(n=t.cloneNode(!0),n.removeAttribute("m-if"),s.after(n),this._bnd(n,e),this._w(n,e)):!i&&n&&(this._kill(n),n.remove(),n=null)});this._reg(s,i.kill)}_dir_for(s,n){const i=s.getAttribute("m-for"),o=s.getAttribute("m-key"),l=i.match(/^\s*(.*?)\s+in\s+(.*$)/);if(!l)return;const[c,f,a]=l,h=f.replace(/[()]/g,"").split(",").map(t=>t.trim()),_=h[0],u=h[1],p=this._fn(a),d=!!o&&/^[a-zA-Z_$][\w$]*$/.test(o),g=!o||d?null:this._fn(o),y=document.createComment("for");s.replaceWith(y);const m=s.cloneNode(!0);m.removeAttribute("m-for"),m.removeAttribute("m-key");let b=new Map;const w=this._ef(()=>{const s=p(this.s,n)||[],i=s[t]||this._mf.get(s);i&&this._tk(i,e);const l=Array.isArray(s)?this.toRaw(s):Array.from(s),c=new Map;let f=y;for(let t=0;t<l.length;t++){let e=l[t];null===e||"object"!=typeof e||e[r]||(e=this._r(e));const s=Object.create(n||{});s[_]=e,u&&(s[u]=t);const i=o?d?e&&e[o]:g(this.s,s):t;let a=b.get(i);if(a){const r=a._sc;r[_]=e,u&&(r[u]=t),b.delete(i)}else a=m.cloneNode(!0),a._sc=this._r(s),this._bnd(a,a._sc),this._w(a,a._sc);f.nextSibling!==a&&f.after(a),c.set(i,a),f=a}b.forEach(t=>{this._kill(t),t.remove()}),b=c});this._reg(y,()=>{b.forEach(t=>this._kill(t)),w.kill()})}_txt(t,e){const r=t.nodeValue;if(r.startsWith("{{")&&r.endsWith("}}")&&r.indexOf("{{",2)<0){const s=this._fn(r.slice(2,-2));let n;const i=this._ef(()=>{const r=s(this.s,e),i=null==r?"":String(r);i!==n&&(n=i,t.nodeValue=i)});return void this._reg(t,i.kill)}const s=r.split(/(\{\{.*?\}\})/g).map(t=>t.startsWith("{{")?this._fn(t.slice(2,-2)):t);let n;const i=this._ef(()=>{let r="";for(let t=0;t<s.length;t++){const n=s[t];r+="function"==typeof n?n(this.s,e)??"":n}r!==n&&(n=r,t.nodeValue=r)});this._reg(t,i.kill)}_at(t,e,r,s){const n=this._fn(r);let i;const o="href"===e||"src"===e||"action"===e||"formaction"===e||"xlink:href"===e,l=this._ef(()=>{let r=n(this.s,s);if(o&&null!=r&&"string"==typeof r&&a.test(r)&&(console.warn("Reflex: Blocked unsafe URL protocol in",e+":",r),r="about:blank"),"class"===e){const e=this._cls(r);e!==i&&(i=e,t.className=e)}else if("style"===e){const e=this._sty(r);e!==i&&(i=e,t.style.cssText=e)}else if(e in t)t[e]=r??"";else{const s=null===r||!1===r?null:String(r);s!==i&&(i=s,null===s?t.removeAttribute(e):t.setAttribute(e,s))}});this._reg(t,l.kill)}_html(t,e,r){const s=this._fn(e);let n;const i=this._ef(()=>{const e=s(this.s,r);let i=null==e?"":String(e);this.cfg.sanitize&&("undefined"!=typeof DOMPurify?i=DOMPurify.sanitize(i):(i=i.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t])),console.warn("Reflex: DOMPurify not loaded. HTML content escaped for safety. Load DOMPurify for proper sanitization."))),i!==n&&(n=i,t.innerHTML=i)});this._reg(t,i.kill)}_show(t,e,r){const s=this._fn(e),n="none"===t.style.display?"":t.style.display;let i;const o=this._ef(()=>{const e=s(this.s,r)?n:"none";e!==i&&(i=e,t.style.display=e)});this._reg(t,o.kill)}_mod(t,e,r){const s=this._fn(e),n=(t.type||"").toLowerCase(),i="checkbox"===n,o="number"===n||"range"===n,l=this._ef(()=>{const e=s(this.s,r);if(i)t.checked=!!e;else{const r=null==e?"":String(e);t.value!==r&&(t.value=r)}});this._reg(t,l.kill);const c=()=>{let s;s=i?t.checked:o?""===t.value?null:parseFloat(t.value):t.value;const n=e.split("."),l=n.pop();if(f[l])return void console.warn("Reflex: Blocked attempt to set unsafe property:",l);let c=r&&n[0]in r?r:this.s;for(const t of n){if(f[t])return void console.warn("Reflex: Blocked attempt to traverse unsafe property:",t);if(null==c[t])c[t]={};else if("object"!=typeof c[t])return void console.warn("Reflex: Cannot set nested property on non-object value at path:",t);c=c[t]}c[l]=s},a=i||"SELECT"===t.tagName?"change":"input";t.addEventListener(a,c),"change"!==a&&t.addEventListener("change",c),this._reg(t,()=>{t.removeEventListener(a,c),t.removeEventListener("change",c)})}_ev(t,e,r,s){const[n,...i]=e.split(".");this._dh.has(n)||(this._dh.set(n,new WeakMap),this._dr.addEventListener(n,t=>this._hdl(t,n))),this._dh.get(n).set(t,{f:this._fn(r,!0),o:s,m:i})}_hdl(t,e){let r=t.target;for(;r&&r!==this._dr;){const s=this._dh.get(e)?.get(r);if(s){const{f:n,o:i,m:o}=s;if(o.includes("self")&&t.target!==r){r=r.parentNode;continue}if(o.includes("prevent")&&t.preventDefault(),o.includes("stop")&&t.stopPropagation(),n(this.s,i,t),o.includes("once")&&this._dh.get(e).delete(r),t.cancelBubble)return}r=r.parentNode}}_fn(e,r){const s=(r?"H:":"")+e,i=this._ec.get(s);if(i)return i;if(h.test(e))return console.warn("Reflex: Blocked potentially unsafe expression:",e),this._ec.set(s,()=>{});if(!r&&33===e.charCodeAt(0)&&/^![a-z_$][\w$.]*$/i.test(e)){const r=e.slice(1).split(".");for(const t of r)if(f[t])return console.warn("Reflex: Blocked access to unsafe property:",t),this._ec.set(s,()=>{});const n=this;return this._ec.set(s,(e,s)=>{if(s){const e=s[t]||n._mf.get(s);e&&n._tk(e,r[0])}let i=s&&r[0]in s?s:e;for(const t of r){if(null==i)return!0;i=i[t]}return!i})}if(!r&&/^[a-z_$][\w$.]*$/i.test(e)){const r=e.split(".");for(const t of r)if(f[t])return console.warn("Reflex: Blocked access to unsafe property:",t),this._ec.set(s,()=>{});const n=this;if(1===r.length){const e=r[0];return this._ec.set(s,(r,s)=>{if(s){const r=s[t]||n._mf.get(s);r&&n._tk(r,e)}return s&&e in s?s[e]:r[e]})}return this._ec.set(s,(e,s)=>{if(s){const e=s[t]||n._mf.get(s);e&&n._tk(e,r[0])}let i=s&&r[0]in s?s:e;for(const t of r){if(null==i)return;i=i[t]}return i})}const o=!r&&/^([a-z_$][\w$]*)\[(\d+)\](\.[\w$.]+)?$/i.exec(e);if(o){const e=o[1],r=parseInt(o[2],10),n=o[3];if(f[e])return console.warn("Reflex: Blocked access to unsafe property:",e),this._ec.set(s,()=>{});const i=n?n.slice(1).split("."):null;if(i)for(const t of i)if(f[t])return console.warn("Reflex: Blocked access to unsafe property:",t),this._ec.set(s,()=>{});const l=this;return this._ec.set(s,(s,n)=>{if(n){const r=n[t]||l._mf.get(n);r&&l._tk(r,e)}let o=n&&e in n?n[e]:s[e];if(null==o)return;let c=o[r];if(i)for(const t of i){if(null==c)return;c=c[t]}return c})}if(this.cfg.cspSafe)try{const t=this._getParser().compile(e,this);return this._ec.set(s,t)}catch(t){return console.warn("Reflex: CSP-safe compile error:",e,t),this._ec.set(s,()=>{})}const l=new Set;let a;for(c.lastIndex=0;a=c.exec(e);)!n[a[1]]&&l.add(a[1]);const _=Array.from(l).map(t=>`var ${t}=(c&&(${JSON.stringify(t)} in c))?c.${t}:s.${t};`).join(""),u=r?`${_}${e};`:`${_}return(${e});`;try{return this._ec.set(s,new Function("s","c","$event",u))}catch(t){return console.warn("Reflex compile error:",e,t),this._ec.set(s,()=>{})}}_trv(r,s=new Set){if(null===r||"object"!=typeof r||s.has(r))return;s.add(r);const n=r[t]||this._mf.get(r);if(n&&this._tk(n,e),Array.isArray(r))for(const t of r)this._trv(t,s);else if(r instanceof Map||r instanceof Set)r.forEach(t=>this._trv(t,s));else for(const t in r)this._trv(r[t],s)}_clone(t,e=new Map){if(null===(t=this.toRaw(t))||"object"!=typeof t)return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t.source,t.flags);if(t instanceof Map){const r=new Map;return e.set(t,r),t.forEach((t,s)=>r.set(s,this._clone(t,e))),r}if(t instanceof Set){const r=new Set;return e.set(t,r),t.forEach(t=>r.add(this._clone(t,e))),r}if(Array.isArray(t)){const r=[];e.set(t,r);for(let s=0;s<t.length;s++)r[s]=this._clone(t[s],e);return r}const r={};e.set(t,r);for(const s in t)r[s]=this._clone(t[s],e);return r}_cls(t){return t?"string"==typeof t?t:Array.isArray(t)?t.map(t=>this._cls(t)).filter(Boolean).join(" "):"object"==typeof t?Object.keys(t).filter(e=>t[e]).join(" "):String(t):""}_sty(t){if(!t)return"";if("string"==typeof t)return t;if("object"==typeof t){let e="";for(const r in t){const s=t[r];null!=s&&!1!==s&&(e+=r+":"+s+";")}return e}return String(t)}_comp(t,e,r){const s=this._cp.get(e),n=s._t.cloneNode(!0),i=this._r({}),o=[],l=Object.create(null),c=Array.from(t.attributes);for(const t of c){const e=t.name,r=t.value;e.startsWith("@")?l[e.slice(1)]=this._fn(r,!0):e.startsWith(":")?o.push({name:e.slice(1),exp:r}):i[e]=r}for(const t of o)i[t.name]=this._fn(t.exp)(this.s,r);const f=(t,e)=>{n.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0}));const s=l[t];s&&s(this.s,r,e)},a=Object.create(i);if(a.$props=i,a.$emit=f,s.s){const t=s.s(i,{emit:f,props:i,slots:{}});if(t&&"object"==typeof t)for(const e in t)a[e]=null!==t[e]&&"object"==typeof t[e]?this._r(t[e]):t[e]}const h=this._r(a);t.replaceWith(n);for(const t of o){const e=this._fn(t.exp),s=this._ef(()=>{i[t.name]=e(this.s,r)});this._reg(n,s.kill)}this._bnd(n,h),this._w(n,h)}}"undefined"!=typeof module?module.exports=y:window.Reflex=y;